{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Hostienda PC\\\\Documents\\\\ToDoApp\\\\pages\\\\index.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport NewTaskCard from \"../components/Cards/NewTaskCard\";\nimport TaskCard from \"../components/Cards/TaskCard\";\nimport SearchBar from \"../components/SearchBar/SearchBar\";\nimport Spinner from \"../components/Spinner/Spinner\";\nimport { Box, Button, Flex, Center } from \"@chakra-ui/react\";\nvar NEXT_PUBLIC_API_URL = process.env.NEXT_PUBLIC_API_URL;\n\nvar index = function index(_ref) {\n  _s();\n\n  var _jsx;\n\n  var data = _ref.data;\n\n  var _useState = useState(data),\n      tasks = _useState[0],\n      setTasks = _useState[1];\n\n  var _useState2 = useState(data),\n      filtered = _useState2[0],\n      setFiltered = _useState2[1];\n\n  var _useState3 = useState(false),\n      newTask = _useState3[0],\n      setNewTask = _useState3[1];\n\n  var _useState4 = useState(false),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var perFiltered = function perFiltered(searchParam) {\n    var tasksFiltered = tasks;\n\n    if (searchParam.length == 0) {\n      setFiltered(tasks);\n    } else {\n      tasksFiltered = tasksFiltered.filter(function (e) {\n        return e.title.toLowerCase().replace(/ /g, \"\").match(searchParam ? searchParam.toLowerCase().replace(/ /g, \"\").replace(/#/g, \"\") : \"\");\n      });\n      setFiltered(tasksFiltered);\n    }\n  };\n\n  var handleSummit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(title) {\n      var response, json, newData;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              _context.prev = 1;\n              _context.next = 4;\n              return fetch(\"\".concat(NEXT_PUBLIC_API_URL), {\n                method: \"POST\",\n                body: JSON.stringify({\n                  title: title,\n                  status: false\n                }),\n                headers: {\n                  \"Content-type\": \"application/json; charset=UTF-8\"\n                }\n              });\n\n            case 4:\n              response = _context.sent;\n              _context.next = 7;\n              return response.json();\n\n            case 7:\n              json = _context.sent;\n              newData = tasks;\n              _context.next = 11;\n              return newData.push(json);\n\n            case 11:\n              setTasks(newData);\n              setFiltered(newData);\n              setNewTask(false);\n              setLoading(false);\n              _context.next = 21;\n              break;\n\n            case 17:\n              _context.prev = 17;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(_context.t0);\n              setLoading(false);\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 17]]);\n    }));\n\n    return function handleSummit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleUpdate = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(title, newTitle, id, index, setEdit) {\n      var response, json, newArr;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(newTitle !== title)) {\n                _context2.next = 24;\n                break;\n              }\n\n              setLoading(true);\n              _context2.prev = 2;\n              id < 6 ? id = id : id = 1;\n              _context2.next = 6;\n              return fetch(\"\".concat(NEXT_PUBLIC_API_URL, \"/\").concat(id), {\n                method: \"PUT\",\n                body: JSON.stringify({\n                  title: newTitle\n                }),\n                headers: {\n                  \"Content-type\": \"application/json; charset=UTF-8\"\n                }\n              });\n\n            case 6:\n              response = _context2.sent;\n              _context2.next = 9;\n              return response.json();\n\n            case 9:\n              json = _context2.sent;\n              newArr = tasks;\n              newArr[index] = json;\n              setTasks(newArr);\n              setFiltered(newArr);\n              setLoading(false);\n              setEdit(false);\n              _context2.next = 22;\n              break;\n\n            case 18:\n              _context2.prev = 18;\n              _context2.t0 = _context2[\"catch\"](2);\n              console.log(_context2.t0);\n              setLoading(false);\n\n            case 22:\n              _context2.next = 25;\n              break;\n\n            case 24:\n              console.log(\"no se ha hecho ninguna modificación\");\n\n            case 25:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[2, 18]]);\n    }));\n\n    return function handleUpdate(_x2, _x3, _x4, _x5, _x6) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleDelete = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id, index) {\n      var newArr;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              setLoading(true);\n              _context3.prev = 1;\n              id < 6 ? id = id : id = 1;\n              _context3.next = 5;\n              return fetch(\"\".concat(NEXT_PUBLIC_API_URL, \"/\").concat(id), {\n                method: \"DELETE\"\n              });\n\n            case 5:\n              newArr = tasks;\n              newArr.splice(index, 1);\n              setTasks(_toConsumableArray(newArr));\n              setFiltered(_toConsumableArray(newArr));\n              setLoading(false);\n              _context3.next = 16;\n              break;\n\n            case 12:\n              _context3.prev = 12;\n              _context3.t0 = _context3[\"catch\"](1);\n              console.log(_context3.t0);\n              setLoading(false);\n\n            case 16:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[1, 12]]);\n    }));\n\n    return function handleDelete(_x7, _x8) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Flex, {\n    flexDirection: \"column\",\n    align: \"center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 5\n    }\n  }, __jsx(Box, {\n    background: \"white\",\n    height: \"100%\",\n    maxWidth: \"830px\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }\n  }, __jsx(Flex, {\n    flexDirection: \"column\",\n    align: \"center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }, __jsx(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, \"Lista de tareas\"), __jsx(Flex, {\n    pr: \"55px\",\n    pl: \"55px\",\n    mb: \"20px\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }, __jsx(SearchBar, {\n    perFiltered: perFiltered,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  })), __jsx(\"div\", {\n    className: \"btn-group mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, __jsx(Button, {\n    className: \"btn btn-info\",\n    onClick: function onClick() {\n      return setFiltered(tasks);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, \"Todas\"), __jsx(Button, {\n    className: \"btn btn-warning\",\n    onClick: function onClick() {\n      var arr = tasks.filter(function (arr) {\n        return arr.status === false;\n      });\n      setFiltered(arr);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, \"Pendientes\"), __jsx(Button, {\n    className: \"btn btn-success\",\n    onClick: function onClick() {\n      var arr = tasks.filter(function (arr) {\n        return arr.status === true;\n      });\n      setFiltered(arr);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }\n  }, \"Realizadas\")), newTask && __jsx(NewTaskCard, (_jsx = {\n    setNewTask: setNewTask,\n    handleSummit: handleSummit\n  }, _defineProperty(_jsx, \"setNewTask\", setNewTask), _defineProperty(_jsx, \"__self\", _this), _defineProperty(_jsx, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 162,\n    columnNumber: 9\n  }), _jsx)), loading && __jsx(Spinner, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 19\n    }\n  }), filtered && filtered.map(function (item, index) {\n    return __jsx(TaskCard, {\n      key: \"\".concat(item, \"-\").concat(index),\n      index: index,\n      id: item.id,\n      title: item.title,\n      status: item.status,\n      setFiltered: setFiltered,\n      setTasks: setTasks,\n      tasks: tasks,\n      handleUpdate: handleUpdate,\n      handleDelete: handleDelete,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }\n    });\n  }), __jsx(Button, {\n    onClick: function onClick() {\n      return setNewTask(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }\n  }, \"Nueva tarea\"))));\n};\n\n_s(index, \"gmrXPduEcevKeTCBZbG7tlXCrOo=\");\n\nexport var __N_SSP = true;\nexport default index;","map":{"version":3,"sources":["C:/Users/Hostienda PC/Documents/ToDoApp/pages/index.js"],"names":["React","useState","NewTaskCard","TaskCard","SearchBar","Spinner","Box","Button","Flex","Center","NEXT_PUBLIC_API_URL","process","env","index","data","tasks","setTasks","filtered","setFiltered","newTask","setNewTask","loading","setLoading","perFiltered","searchParam","tasksFiltered","length","filter","e","title","toLowerCase","replace","match","handleSummit","fetch","method","body","JSON","stringify","status","headers","response","json","newData","push","console","log","handleUpdate","newTitle","id","setEdit","newArr","handleDelete","splice","arr","map","item"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport NewTaskCard from \"../components/Cards/NewTaskCard\";\r\nimport TaskCard from \"../components/Cards/TaskCard\";\r\nimport SearchBar from \"../components/SearchBar/SearchBar\";\r\nimport Spinner from \"../components/Spinner/Spinner\";\r\nimport { Box, Button, Flex, Center } from \"@chakra-ui/react\";\r\n\r\nconst { NEXT_PUBLIC_API_URL } = process.env;\r\n\r\nconst index = ({ data }) => {\r\n  const [tasks, setTasks] = useState(data);\r\n  const [filtered, setFiltered] = useState(data);\r\n  const [newTask, setNewTask] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const perFiltered = (searchParam) => {\r\n    let tasksFiltered = tasks;\r\n    if (searchParam.length == 0) {\r\n      setFiltered(tasks);\r\n    } else {\r\n      tasksFiltered = tasksFiltered.filter((e) =>\r\n        e.title\r\n          .toLowerCase()\r\n          .replace(/ /g, \"\")\r\n          .match(\r\n            searchParam\r\n              ? searchParam.toLowerCase().replace(/ /g, \"\").replace(/#/g, \"\")\r\n              : \"\"\r\n          )\r\n      );\r\n      setFiltered(tasksFiltered);\r\n    }\r\n  };\r\n\r\n  const handleSummit = async (title) => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(`${NEXT_PUBLIC_API_URL}`, {\r\n        method: \"POST\",\r\n        body: JSON.stringify({\r\n          title: title,\r\n          status: false,\r\n        }),\r\n        headers: {\r\n          \"Content-type\": \"application/json; charset=UTF-8\",\r\n        },\r\n      });\r\n      let json = await response.json();\r\n      let newData = tasks;\r\n\r\n      await newData.push(json);\r\n\r\n      setTasks(newData);\r\n      setFiltered(newData);\r\n      setNewTask(false);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUpdate = async (title, newTitle, id, index, setEdit) => {\r\n    if (newTitle !== title) {\r\n      setLoading(true);\r\n      try {\r\n        id < 6 ? (id = id) : (id = 1);\r\n\r\n        const response = await fetch(`${NEXT_PUBLIC_API_URL}/${id}`, {\r\n          method: \"PUT\",\r\n          body: JSON.stringify({\r\n            title: newTitle,\r\n          }),\r\n          headers: {\r\n            \"Content-type\": \"application/json; charset=UTF-8\",\r\n          },\r\n        });\r\n\r\n        const json = await response.json();\r\n        let newArr = tasks;\r\n        newArr[index] = json;\r\n\r\n        setTasks(newArr);\r\n        setFiltered(newArr);\r\n        setLoading(false);\r\n        setEdit(false);\r\n      } catch (error) {\r\n        console.log(error);\r\n        setLoading(false);\r\n      }\r\n    } else {\r\n      console.log(\"no se ha hecho ninguna modificación\");\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id, index) => {\r\n    setLoading(true);\r\n    try {\r\n      id < 6 ? (id = id) : (id = 1);\r\n\r\n      await fetch(`${NEXT_PUBLIC_API_URL}/${id}`, {\r\n        method: \"DELETE\",\r\n      });\r\n\r\n      let newArr = tasks;\r\n      newArr.splice(index, 1);\r\n\r\n      setTasks([...newArr]);\r\n      setFiltered([...newArr]);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Flex \r\n    flexDirection={\"column\"}\r\n    align=\"center\" >\r\n    <Box \r\n    background=\"white\" \r\n    height=\"100%\"\r\n    maxWidth=\"830px\"\r\n    >\r\n      <Flex flexDirection={\"column\"}\r\n      align={\"center\"} >\r\n\r\n      <h1>Lista de tareas</h1>\r\n      <Flex pr={\"55px\"}\r\n      pl={\"55px\"} \r\n      mb={\"20px\"} >\r\n      <SearchBar perFiltered={perFiltered} />\r\n      </Flex>\r\n      \r\n\r\n      <div className=\"btn-group mb-3\">\r\n        <Button className=\"btn btn-info\" onClick={() => setFiltered(tasks)}>\r\n          Todas\r\n        </Button>\r\n        <Button\r\n          className=\"btn btn-warning\"\r\n          onClick={() => {\r\n            const arr = tasks.filter((arr) => arr.status === false);\r\n            setFiltered(arr);\r\n          }}\r\n          >\r\n          Pendientes\r\n        </Button>\r\n\r\n        <Button\r\n          className=\"btn btn-success\"\r\n          onClick={() => {\r\n            const arr = tasks.filter((arr) => arr.status === true);\r\n            setFiltered(arr);\r\n          }}\r\n        >\r\n          Realizadas\r\n        </Button>\r\n      </div>\r\n      {newTask && (\r\n        <NewTaskCard\r\n          setNewTask={setNewTask}\r\n          handleSummit={handleSummit}\r\n          setNewTask={setNewTask}\r\n        />\r\n      )}\r\n\r\n      {loading && <Spinner />}\r\n\r\n      {filtered &&\r\n        filtered.map((item, index) => (\r\n          <TaskCard\r\n            key={`${item}-${index}`}\r\n            index={index}\r\n            id={item.id}\r\n            title={item.title}\r\n            status={item.status}\r\n            setFiltered={setFiltered}\r\n            setTasks={setTasks}\r\n            tasks={tasks}\r\n            handleUpdate={handleUpdate}\r\n            handleDelete={handleDelete}\r\n          />\r\n        ))}\r\n\r\n      <Button onClick={() => setNewTask(true)}>Nueva tarea</Button>\r\n</Flex>\r\n    </Box>\r\n    </Flex>\r\n  );\r\n};\r\n\r\nexport async function getServerSideProps(context) {\r\n  const res = await fetch(`${NEXT_PUBLIC_API_URL}`);\r\n  const data = await res.json();\r\n\r\n  if (!data) {\r\n    console.log(data);\r\n    return {\r\n      redirect: {\r\n        destination: \"/\",\r\n        permanent: false,\r\n      },\r\n    };\r\n  }\r\n  return {\r\n    props: { data },\r\n  };\r\n}\r\n\r\nexport default index;\r\n"]},"metadata":{},"sourceType":"module"}