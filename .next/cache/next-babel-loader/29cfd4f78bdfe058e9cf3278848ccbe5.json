{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Oriana\\\\Documents\\\\Daniel\\\\infocasas\\\\infocasas-frontend-challenge\\\\pages\\\\index.js\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport NewTaskCard from '../components/Cards/NewTaskCard';\nimport TaskCard from '../components/Cards/TaskCard';\nimport SearchBar from '../components/SearchBar/SearchBar';\nimport Spinner from '../components/Spinner/Spinner';\nconst {\n  NEXT_PUBLIC_API_URL\n} = process.env;\n\nconst index = ({\n  data\n}) => {\n  const {\n    0: tasks,\n    1: setTasks\n  } = useState(data);\n  const {\n    0: filtered,\n    1: setFiltered\n  } = useState(data);\n  const {\n    0: newTask,\n    1: setNewTask\n  } = useState(false);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: filter,\n    1: setFilter\n  } = useState(true);\n\n  const perFiltered = searchParam => {\n    let tasksFiltered = tasks;\n\n    if (searchParam.length == 0) {\n      setFiltered(tasks);\n    } else {\n      tasksFiltered = tasksFiltered.filter(e => e.title.toLowerCase().replace(/ /g, '').match(searchParam ? searchParam.toLowerCase().replace(/ /g, '').replace(/#/g, '') : ''));\n      setFiltered(tasksFiltered);\n    }\n  };\n\n  const handleSummit = async title => {\n    setLoading(true);\n\n    try {\n      const response = await fetch(`${NEXT_PUBLIC_API_URL}`, {\n        method: 'POST',\n        body: JSON.stringify({\n          title: title,\n          status: false\n        }),\n        headers: {\n          'Content-type': 'application/json; charset=UTF-8'\n        }\n      });\n      let json = await response.json();\n      console.log(json);\n      let newData = tasks;\n      await newData.push(json);\n      console.log(newData);\n      setTasks(newData);\n      setFiltered(newData);\n      setNewTask(false);\n      setLoading(false);\n    } catch (error) {\n      console.log(error);\n      setLoading(false);\n    }\n  };\n\n  const handleUpdate = async (title, newTitle, id, index, setEdit) => {\n    if (newTitle !== title) {\n      setLoading(true);\n\n      try {\n        id < 6 ? id = id : id = 1;\n        const response = await fetch(`${NEXT_PUBLIC_API_URL}/${id}`, {\n          method: 'PUT',\n          body: JSON.stringify({\n            title: newTitle\n          }),\n          headers: {\n            'Content-type': 'application/json; charset=UTF-8'\n          }\n        });\n        const json = await response.json();\n        let newArr = tasks;\n        newArr[index] = json;\n        setTasks(newArr);\n        setFiltered(newArr);\n        setLoading(false);\n        setEdit(false);\n      } catch (error) {\n        console.log(error);\n        setLoading(false);\n      }\n    } else {\n      console.log(\"no se ha hecho ninguna modificación\");\n    }\n  };\n\n  const handleDelete = async (id, index) => {\n    setLoading(true);\n\n    try {\n      id < 6 ? id = id : id = 1;\n      await fetch(`${NEXT_PUBLIC_API_URL}/${id}`, {\n        method: 'DELETE'\n      });\n      let newArr = tasks;\n      newArr.splice(index, 1);\n      setTasks(newArr);\n      setFiltered(newArr);\n      setLoading(false);\n      console.log(newArr);\n    } catch (error) {\n      console.log(error);\n      setLoading(false);\n    }\n  };\n\n  const handleCheck = async (index, status) => {\n    let newArr = tasks;\n    newArr[index].status = status;\n    setTasks(newArr);\n    setFiltered(newArr);\n    console.log(newArr[index].status);\n  };\n\n  return __jsx(\"div\", {\n    className: \"card p-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, __jsx(\"h1\", {\n    className: \"d-flex justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, \"Lista de Tareas\"), __jsx(\"div\", {\n    className: \"btn-group mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }, __jsx(\"button\", {\n    className: \"btn btn-primary\",\n    onClick: () => setNewTask(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }, \"Nueva tarea\"), __jsx(\"button\", {\n    className: \"btn btn-info\",\n    onClick: () => {\n      setFilter(true);\n      setFiltered(tasks);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }, \"Todas\"), __jsx(\"button\", {\n    className: \"btn btn-warning\",\n    onClick: () => {\n      const arr = tasks.filter(arr => {\n        if (arr.status == false) return true;\n      });\n      console.log(arr);\n      setFiltered(arr);\n      setFilter(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, \"Pendientes\"), __jsx(\"button\", {\n    className: \"btn btn-success\",\n    onClick: () => {\n      const arr = tasks.filter(arr => {\n        if (arr.status == true) return true;\n      });\n      console.log(arr);\n      setFilter(false);\n      setFiltered(arr);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, \"Realizadas\")), newTask && __jsx(NewTaskCard, {\n    setNewTask: setNewTask,\n    handleSummit: handleSummit,\n    setNewTask: setNewTask,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 27\n    }\n  }), loading && __jsx(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 27\n    }\n  }), filtered && filtered.map((item, index) => __jsx(TaskCard, {\n    key: `${item}-${index}`,\n    index: index,\n    id: item.id,\n    title: item.title,\n    status: item.status,\n    filter: filter,\n    handleUpdate: handleUpdate,\n    handleDelete: handleDelete,\n    handleCheck: handleCheck,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 59\n    }\n  })));\n};\n\nexport async function getServerSideProps(context) {\n  const res = await fetch(`${NEXT_PUBLIC_API_URL}`);\n  const data = await res.json();\n\n  if (!data) {\n    console.log(data);\n    return {\n      redirect: {\n        destination: '/',\n        permanent: false\n      }\n    };\n  }\n\n  return {\n    props: {\n      data\n    }\n  };\n}\nexport default index;","map":{"version":3,"sources":["C:/Users/Oriana/Documents/Daniel/infocasas/infocasas-frontend-challenge/pages/index.js"],"names":["React","useEffect","useState","NewTaskCard","TaskCard","SearchBar","Spinner","NEXT_PUBLIC_API_URL","process","env","index","data","tasks","setTasks","filtered","setFiltered","newTask","setNewTask","loading","setLoading","filter","setFilter","perFiltered","searchParam","tasksFiltered","length","e","title","toLowerCase","replace","match","handleSummit","response","fetch","method","body","JSON","stringify","status","headers","json","console","log","newData","push","error","handleUpdate","newTitle","id","setEdit","newArr","handleDelete","splice","handleCheck","arr","map","item","getServerSideProps","context","res","redirect","destination","permanent","props"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport NewTaskCard from '../components/Cards/NewTaskCard'\r\nimport TaskCard from '../components/Cards/TaskCard'\r\nimport SearchBar from '../components/SearchBar/SearchBar'\r\nimport Spinner from '../components/Spinner/Spinner'\r\n\r\nconst { NEXT_PUBLIC_API_URL } = process.env\r\n \r\nconst index = ({data}) => {\r\n\r\n    const [tasks, setTasks] = useState(data)\r\n    const [filtered, setFiltered] = useState(data)\r\n    const [newTask, setNewTask] = useState(false)\r\n    const [loading, setLoading] = useState(false)\r\n    const [filter, setFilter] = useState(true)\r\n\r\n    const perFiltered = (searchParam) => {\r\n        let tasksFiltered = tasks\r\n        if (searchParam.length == 0) {\r\n            setFiltered(tasks)\r\n        } else {\r\n\r\n            tasksFiltered = tasksFiltered.filter((e) =>\r\n                e.title.toLowerCase().replace(/ /g, '').match(\r\n                    searchParam ? (searchParam).toLowerCase().replace(/ /g, '').replace(/#/g, '') : ''\r\n                )\r\n            )                \r\n            setFiltered(tasksFiltered)            \r\n        }\r\n    }\r\n\r\n    const handleSummit = async (title) => {        \r\n        setLoading(true)\r\n        try {\r\n            const response = await  fetch(`${NEXT_PUBLIC_API_URL}`, {\r\n            method: 'POST',\r\n            body: JSON.stringify({\r\n                title: title,\r\n                status: false\r\n            }),\r\n            headers: {\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n            })\r\n        let json = await response.json()\r\n\r\n        console.log(json)\r\n\r\n        let newData = tasks\r\n\r\n        await  newData.push(json)\r\n        console.log(newData)\r\n\r\n        setTasks(newData)\r\n        setFiltered(newData)\r\n        setNewTask(false)\r\n        setLoading(false)\r\n            \r\n        } catch (error) {\r\n            console.log(error)\r\n            setLoading(false)\r\n        }\r\n\r\n    }\r\n\r\n    const handleUpdate = async(title, newTitle, id, index, setEdit) => {\r\n\r\n        if(newTitle !== title ){\r\n                 setLoading(true)\r\n                try {        \r\n                 \r\n                    id < 6 ? id = id   : id = 1\r\n                    \r\n                const response = await fetch(`${NEXT_PUBLIC_API_URL}/${id}`, {\r\n                    method: 'PUT',\r\n                    body: JSON.stringify({\r\n                    title: newTitle,\r\n                    }),\r\n                    headers: {\r\n                    'Content-type': 'application/json; charset=UTF-8',\r\n                    },\r\n                })\r\n\r\n                const json = await response.json()\r\n                let newArr = tasks\r\n                newArr[index] = json\r\n\r\n                setTasks(newArr)\r\n                setFiltered(newArr)            \r\n                setLoading(false)\r\n                setEdit(false)\r\n                } catch (error) {\r\n                    \r\n                    console.log(error)\r\n                    setLoading(false)\r\n                }\r\n        \r\n        }else{\r\n            console.log(\"no se ha hecho ninguna modificación\")\r\n        }\r\n    }\r\n\r\n    const handleDelete = async(id, index) => {\r\n        setLoading(true)\r\n        try {\r\n\r\n            id < 6 ? id = id   : id = 1\r\n            \r\n           await fetch(`${NEXT_PUBLIC_API_URL}/${id}`, {\r\n                method: 'DELETE',\r\n              });\r\n\r\n                let newArr = tasks \r\n                newArr.splice( index ,1)  \r\n\r\n                setTasks(newArr)    \r\n                setFiltered(newArr) \r\n                setLoading(false)\r\n                console.log(newArr)\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const handleCheck = async (index, status) => {\r\n\r\n              \r\n                let newArr = tasks \r\n                newArr[index].status = status\r\n\r\n                setTasks(newArr)    \r\n                setFiltered(newArr) \r\n              console.log(newArr[index].status)\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"card p-3\">\r\n            <h1 className=\"d-flex justify-content-center\">Lista de Tareas</h1>\r\n          {/*   <SearchBar\r\n            perFiltered={perFiltered} /> */}\r\n\r\n            <div className=\"btn-group mb-3\">\r\n\r\n            <button\r\n            className=\"btn btn-primary\"\r\n            onClick={ () => setNewTask(true)   }>\r\n                Nueva tarea\r\n            </button>\r\n\r\n            <button\r\n            className=\"btn btn-info\"\r\n            onClick={() => {\r\n                setFilter(true)\r\n                setFiltered(tasks)\r\n                \r\n            }}\r\n            >Todas</button>\r\n            <button\r\n            className=\"btn btn-warning\"\r\n            onClick={ () => {\r\n                const arr = tasks.filter( (arr) => {\r\n                    if (arr.status == false) return true \r\n                })\r\n                console.log(arr)\r\n                setFiltered(arr)\r\n                setFilter(false)\r\n            } }>Pendientes</button>\r\n\r\n            <button\r\n            className=\"btn btn-success\"\r\n            onClick={ () => {\r\n                const arr = tasks.filter( (arr) => {\r\n                    if (arr.status == true) return true \r\n                })\r\n                console.log(arr)\r\n                setFilter(false)\r\n                setFiltered(arr)\r\n            } }>Realizadas</button>\r\n\r\n            </div>\r\n            {newTask  && (<NewTaskCard            \r\n            setNewTask={setNewTask}\r\n            handleSummit= {handleSummit}\r\n            setNewTask={setNewTask}\r\n            />) }\r\n\r\n            { loading && (<Spinner />)}\r\n\r\n            {filtered  && filtered.map( (item, index) =>( <TaskCard \r\n            key={`${item}-${index}`}\r\n            index={index}\r\n            id={item.id}\r\n            title= {item.title}\r\n            status= {item.status}\r\n            filter={filter}\r\n            handleUpdate={handleUpdate}\r\n            handleDelete={handleDelete}\r\n            handleCheck={handleCheck}\r\n            />))}\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport async function getServerSideProps(context) {\r\n    const res = await fetch(`${NEXT_PUBLIC_API_URL}`)\r\n    const data = await res.json()\r\n  \r\n    \r\n    if (!data) {\r\n        console.log(data)\r\n      return {\r\n        redirect: {\r\n          destination: '/',\r\n          permanent: false,\r\n        },\r\n      }\r\n    }\r\n    return {\r\n      props: {data},\r\n    }\r\n  }\r\n\r\nexport default index\r\n"]},"metadata":{},"sourceType":"module"}