{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Oriana\\\\Documents\\\\Daniel\\\\infocasas\\\\infocasas-frontend-challenge\\\\pages\\\\index.js\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport NewTaskCard from '../components/Cards/NewTaskCard';\nimport TaskCard from '../components/Cards/TaskCard';\nimport SearchBar from '../components/SearchBar/SearchBar';\nimport { httpGet } from '../libs/http';\n\nconst index = ({\n  data\n}) => {\n  const {\n    0: tasks,\n    1: setTasks\n  } = useState(data);\n  const {\n    0: filtered,\n    1: setFiltered\n  } = useState(data);\n  const {\n    0: newTask,\n    1: setNewTask\n  } = useState(false);\n  useEffect(() => {}, [tasks]);\n\n  const perFiltered = searchParam => {\n    let tasksFiltered = tasks;\n\n    if (searchParam.length == 0) {\n      setFiltered(tasks);\n    } else {\n      tasksFiltered = tasksFiltered.filter(e => e.title.toLowerCase().replace(/ /g, '').match(searchParam ? searchParam.toLowerCase().replace(/ /g, '').replace(/#/g, '') : ''));\n      setFiltered(tasksFiltered);\n    }\n  };\n\n  const handleSummit = async (title, body) => {\n    try {\n      const response = await fetch('https://my-json-server.typicode.com/lozcep/infotest/posts', {\n        method: 'POST',\n        body: JSON.stringify({\n          title: title,\n          body: body\n        }),\n        headers: {\n          'Content-type': 'application/json; charset=UTF-8'\n        }\n      });\n      let json = await response.json();\n      console.log(json);\n      let newData = tasks;\n      await newData.push(json);\n      console.log(newData);\n      setTasks(newData);\n      setFiltered(newData);\n      setNewTask(false);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handleUpdate = async (title, body, newTitle, newBody, id, setEdit) => {\n    if (newTitle !== title || newBody !== body) {\n      const response = await fetch(`https://jsonplaceholder.typicode.com/posts/${id}`, {\n        method: 'PUT',\n        body: JSON.stringify({\n          title: newTitle,\n          body: newBody\n        }),\n        headers: {\n          'Content-type': 'application/json; charset=UTF-8'\n        }\n      });\n      const json = await response.json();\n      let newArr = tasks;\n      newArr[id - 1] = await json;\n      console.log(json);\n      setFiltered(newArr);\n      setTasks(newArr);\n      setEdit(false);\n    } else {\n      console.log(\"no se ha hecho ninguna modificación\");\n    }\n  };\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, \"Lista de Tareas\"), __jsx(SearchBar, {\n    perFiltered: perFiltered,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }), __jsx(\"button\", {\n    onClick: () => setNewTask(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, \"Nueva tarea\"), newTask && __jsx(\"button\", {\n    onClick: () => setNewTask(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 28\n    }\n  }, \"Cancelar\"), newTask && __jsx(NewTaskCard, {\n    setNewTask: setNewTask,\n    handleSummit: handleSummit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 26\n    }\n  }), tasks && filtered.map((item, index) => __jsx(TaskCard, {\n    key: `${item}-${index}`,\n    id: item.id,\n    title: item.title,\n    body: item.body,\n    handleUpdate: handleUpdate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 55\n    }\n  })));\n};\n\nexport async function getServerSideProps(context) {\n  const res = await fetch('https://my-json-server.typicode.com/lozcep/infotest/posts');\n  const data = await res.json();\n\n  if (!data) {\n    console.log(data);\n    return {\n      redirect: {\n        destination: '/',\n        permanent: false\n      }\n    };\n  }\n\n  return {\n    props: {\n      data\n    }\n  };\n}\nexport default index;","map":{"version":3,"sources":["C:/Users/Oriana/Documents/Daniel/infocasas/infocasas-frontend-challenge/pages/index.js"],"names":["React","useEffect","useState","NewTaskCard","TaskCard","SearchBar","httpGet","index","data","tasks","setTasks","filtered","setFiltered","newTask","setNewTask","perFiltered","searchParam","tasksFiltered","length","filter","e","title","toLowerCase","replace","match","handleSummit","body","response","fetch","method","JSON","stringify","headers","json","console","log","newData","push","error","handleUpdate","newTitle","newBody","id","setEdit","newArr","map","item","getServerSideProps","context","res","redirect","destination","permanent","props"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport NewTaskCard from '../components/Cards/NewTaskCard'\r\nimport TaskCard from '../components/Cards/TaskCard'\r\nimport SearchBar from '../components/SearchBar/SearchBar'\r\nimport { httpGet } from '../libs/http'\r\n\r\nconst index = ({data}) => {\r\n\r\n    const [tasks, setTasks] = useState(data)\r\n    const [filtered, setFiltered] = useState(data)\r\n    const [newTask, setNewTask] = useState(false)\r\n    \r\n    useEffect(() => {\r\n        \r\n\r\n    }, [tasks])\r\n\r\n    const perFiltered = (searchParam) => {\r\n        let tasksFiltered = tasks\r\n        if (searchParam.length == 0) {\r\n            setFiltered(tasks)\r\n        } else {\r\n\r\n            tasksFiltered = tasksFiltered.filter((e) =>\r\n                e.title.toLowerCase().replace(/ /g, '').match(\r\n                    searchParam ? (searchParam).toLowerCase().replace(/ /g, '').replace(/#/g, '') : ''\r\n                )\r\n            )                \r\n            setFiltered(tasksFiltered)            \r\n        }\r\n    }\r\n\r\n    const handleSummit = async (title, body) => {        \r\n        \r\n        try {\r\n            const response = await  fetch('https://my-json-server.typicode.com/lozcep/infotest/posts', {\r\n            method: 'POST',\r\n            body: JSON.stringify({\r\n                title: title,\r\n                body: body,\r\n            }),\r\n            headers: {\r\n                'Content-type': 'application/json; charset=UTF-8',\r\n            },\r\n            })\r\n        let json = await response.json()\r\n\r\n        console.log(json)\r\n\r\n        let newData = tasks\r\n\r\n        await  newData.push(json)\r\n        console.log(newData)\r\n\r\n        setTasks(newData)\r\n        setFiltered(newData)\r\n        setNewTask(false)\r\n            \r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n\r\n    }\r\n\r\n    const handleUpdate = async(title, body, newTitle, newBody, id, setEdit) => {\r\n\r\n        if(newTitle !== title || newBody !== body ){\r\n\r\n            const response = await fetch(`https://jsonplaceholder.typicode.com/posts/${id}`, {\r\n                method: 'PUT',\r\n                body: JSON.stringify({\r\n                  title: newTitle,\r\n                  body: newBody\r\n                }),\r\n                headers: {\r\n                  'Content-type': 'application/json; charset=UTF-8',\r\n                },\r\n              })\r\n\r\n              const json = await response.json()\r\n\r\n                let newArr = tasks\r\n                  newArr[id-1] =  await json\r\n                console.log(json)\r\n                setFiltered(newArr)\r\n                setTasks(newArr)\r\n                setEdit(false)\r\n        \r\n        }else{\r\n            console.log(\"no se ha hecho ninguna modificación\")\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            <h1>Lista de Tareas</h1>\r\n            <SearchBar\r\n            perFiltered={perFiltered} />\r\n\r\n            <button\r\n            onClick={ () => setNewTask(true)   }>\r\n                Nueva tarea\r\n            </button>\r\n\r\n             { newTask && (<button\r\n            onClick={ () => setNewTask(false) }>\r\n                Cancelar\r\n            </button>)}\r\n\r\n            {newTask && (<NewTaskCard \r\n            setNewTask={setNewTask}\r\n            handleSummit= {handleSummit}\r\n            />) }\r\n\r\n            {tasks && filtered.map( (item, index) =>( <TaskCard \r\n            key={`${item}-${index}`}\r\n            id={item.id}\r\n            title= {item.title}\r\n            body= {item.body}\r\n            handleUpdate={handleUpdate}\r\n            />))}\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport async function getServerSideProps(context) {\r\n    const res = await fetch('https://my-json-server.typicode.com/lozcep/infotest/posts')\r\n    const data = await res.json()\r\n  \r\n    \r\n    if (!data) {\r\n        console.log(data)\r\n      return {\r\n        redirect: {\r\n          destination: '/',\r\n          permanent: false,\r\n        },\r\n      }\r\n    }\r\n    return {\r\n      props: {data},\r\n    }\r\n  }\r\n\r\nexport default index\r\n"]},"metadata":{},"sourceType":"module"}